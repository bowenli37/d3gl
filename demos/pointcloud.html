<!DOCTYPE html>
<html>
<head>
    <title>D3GL Pointcloud</title>
    <link rel="stylesheet" href="../css/demo.css" />
</head>
<body>

<h1>Hello Cloud!</h1>

<script type="text/javascript" src="../js/jquery-1.8.2.js"></script>
<script type="text/javascript" src="../js/jquery.mousewheel.js"></script>
<script type="text/javascript" src="../js/d3.v2.js"></script>
<script type="text/javascript" src="../js/RequestAnimationFrame.js"></script>
<script type="text/javascript" src="../js/three.js"></script>
<script type="text/javascript" src="../js/d3gl.js"></script>
<!-- All scripts above are included here:
<script type="text/javascript" src="../js/d3gl.min.js"></script> -->

<script type="text/javascript">
$(function(){
    d3.csv("../models/pointcloud-house.csv", function(vertices) {
        //var scaleColor = d3.scale.linear()
        //    .domain([0, 1237000]).range([0xff0000, 0xff0000]);

        var pointcloud = d3.gl.pointcloud()
            .width(800).height(500)
            .data(vertices)
            .color(function(d, i, vIdx) {
                if (vIdx > 50000) return 0xff0000;
                else return 0x00ffff;
                //return scaleColor(vIdx);
            });
        
        var scales = {
            "x": d3.scale.linear().domain([-40, 40]),
            "y": d3.scale.linear().domain([-40, 40]),
            "z": d3.scale.linear().domain([0, 100])
        };
        var axis = pointcloud.axis()
            .data(["x", "y", "z"])
            .scale(function(d) { return scales[d]; })
            .orient(function(d) { return d; })
            .thickness(1);
            /*
            .ticks(function(d) {
              if (d == "z") return 5;
              else return 4;
            })
            .tickFont("16px Arial")
            .tickSize(0.5)
            .tickResolution(64)
            .labelSize(1)
            .labelResolution(128)
            .labelFont("bold 20px Helvetica")
            .labelColor("#00f");
            */
        var ticks = axis.ticks()
          .count(function(d) {
              if (d=="z") return 5;
              else return 4;
          })
          .font("16px Arial")
          .size(0.5)
          .resolution(64);
        
        var label = axis.label()
          .size(1)
          .resolution(128)
          .font("bold 20px Helvetica")
          .color("#00f");

        d3.select("body").selectAll("span")
            .data(["pointcloud-house"]).enter().append("span")
            .call(pointcloud);
    });
    
});

</script>
</body>
</html>
